open Ssp_bridge

let help () = 
  print_endline 
  "
  This program transforms a normalized result of Tracking_bigraph library into an input for SSP library.
  
  If you see this message it means that you did not provide necessary number of arguments.
  Arguments required for this program are:
  Arg1 - the name of a file containing discovered states (generated by Trackign_bigraph library).
  Arg2 - the name of a file with normalized transitions (generated by this library).
  Arg3 - the name of a file with reaction rules associated with time they require (created manually).
  Arg4 - the name of a file with control types of agents (created manually).
  Arg5 - the name of the file with transition functions (output of this program).
  "
let () = 
  if Array.length Sys.argv >= 6 then
  let states_file = Sys.argv.(1)
  and norm_trans_file = Sys.argv.(2)
  and trans2timeshift_file = Sys.argv.(3)
  and ctrls_file = Sys.argv.(4)
  and output = Sys.argv.(5)
  and parallel = if Array.length Sys.argv = 7 then bool_of_string Sys.argv.(6) else false in
        Facade.transform_tts ~parallel ~is_trans_file_headerless:true ~states_file ~norm_trans_file ~react_times_file:trans2timeshift_file ~ctrls_file ~ss_file:output
  else
    help ()